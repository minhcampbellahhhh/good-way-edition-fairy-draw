<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Good-way Edition: Fairy Draw (Infinite Challenge)</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: url("../Image/20112025background.png") no-repeat center center fixed;
      margin: 0;
      padding: 0;
      text-align: center;
      user-select: none;
      overflow-x: hidden;
      overflow-y: scroll;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    body::-webkit-scrollbar { display: none; }

    nav {
      display: flex;
      align-items: center;
      background-color: #fff8;
      backdrop-filter: blur(6px);
      padding: 10px 30px;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1100;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .logo { display: flex; align-items: center; gap: 10px; }
    .logo img { width: 150px; vertical-align: middle; }
    .menu { display: flex; gap: 30px; list-style: none; margin-left: 40px; }
    .menu li a {
      text-decoration: none; color: black; font-size: 18px; padding: 6px 12px;
    }

    h1 { margin-bottom: 20px; color: #333; }
    .stats-bar {
      display: flex;
      justify-content: space-around;
      align-items: center;
      background: #e7c9ffcc;
      padding: 8px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-size: 18px;
    }
    .game-container {
      text-align: center;
      max-width: 1500px;
      margin: 20px auto;
      background: #f4e7ffcc;
      border-radius: 10px;
      padding: 20px;
    }

    .question-area { display: none; margin: 20px 0; background: #fff; padding: 15px; border-radius: 10px; }
    .timer, .score { font-size: 18px; color: #333; margin: 10px 0; text-align: center; }
    button {
      padding: 10px 20px; margin: 5px; font-size: 16px; border-radius: 10px;
      border: none; background: #b895ff; cursor: pointer; transition: 0.2s ease;
    }
    button:hover { background: #c062ff; box-shadow: 0 0 5px rgba(0,0,0,0.3); }
    .buff {
      padding: 10px 20px; margin: 5px; font-size: 16px; border-radius: 10px;
      border: none; background: #ffd900; cursor: pointer; transition: 0.2s ease;
    }
    .buff:hover { background: #e1c000; box-shadow: 0 0 5px rgba(0,0,0,0.3); }
    .start {
      padding: 10px 20px; margin: 5px; font-size: 20px; border-radius: 10px;
      border: none; background: #e598ff; cursor: pointer; transition: 0.2s ease;
      border: 4px solid #c32cff;
    }
    .start:hover { background: #a200e3; box-shadow: 0 0 5px rgba(0,0,0,0.3); }

    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 2000;
    }
    .modal-content {
      background: #fff; padding: 20px; border-radius: 10px; text-align: center;
      max-width: 700px; width: 90%; box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    .modal-content button { background: #8b00be; color: white; }
    .modal-content button:hover { background: #4f006c; }
    .show { display: flex !important; }
    footer { background: #222; color: white; text-align: center; padding: 30px; margin-top: 40px; }

    .time-bar-container {
        width: 60%;
        height: 30px;
        background: #ffffff;
        border-radius: 20px;
        overflow: hidden;
        position: relative;
        margin: 10px auto;
    }

    .time-bar {
        height: 100%;
        background: linear-gradient(90deg, #4CAF50, #8BC34A);
        transition: width 0.1s linear;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 18px;
    }

.time-bar.warning {
        background: linear-gradient(90deg, #FF9800, #FFC107);
    }

    .time-bar.danger {
        background: linear-gradient(90deg, #F44336, #E91E63);
    }

.alert-line {
        width: 60%;
        height: 30px;
        background: linear-gradient(to right, #00ff80, #00d9ff);
        border-radius: 3px;
        margin: 10px auto;
        animation: pulseGlow 2s infinite alternate;
    }
    @keyframes pulseGlow {
        from { filter: brightness(1); }
        to { filter: brightness(1.7); }
    }
    #alertText {
        position: relative;
        top: 0px;
        text-align: center;
        font-weight: bold;
        color: #000000;
        font-size: 20px;
    }
    .divider {
      height: 6px;
      background: linear-gradient(to right, #ffb700, #ff3f3f);
      border-radius: 3px;
      margin: 15px auto;
      width: 80%;
    }
    #topicSelect { display: none; margin-top: 20px; }
    .topicBtn {
      padding: 12px 25px;
      font-size: 18px;
      background: #d689ff;
      border-radius: 10px;
      border: 3px solid #9600b0;
      cursor: pointer;
      margin: 10px;
    }
    .topicBtn:hover { background: #c965ff; }
    #countdown {
      font-size: 60px;
      color: #b300ff;
      font-weight: bold;
      margin: 30px 0;
    }
    .guide-box {
        background: #efdbff;
        border: 3px dashed #9e0dff;
        padding: 20px;
        border-radius: 15px;
        margin: 20px auto;
        max-width: 900px;
        text-align: left;
    }
    .guide-box h2 {
        color: #4e008a;
        margin-bottom: 10px;
    }
    .guide-box ul {
        list-style-type: "‚ú® ";
        font-size: 17px;
        line-height: 1.6;
        margin-left: 25px;
    }
  </style>
</head>
<body oncontextmenu="return false;">
  <link rel="icon" type="image/png" href="Image/GWE.png">
  <nav>
    <div class="logo">
      <img src="../Image/BMSTORY.png" alt="Logo"><p style="color:#fb00ff">HTML Games</p>
    </div>
    <ul class="menu">
      <li>ƒê√¢y l√† h·ªá th·ªëng game ƒë∆∞·ª£c l·∫≠p tr√¨nh b·∫±ng HTML, CSS v√† JavaScript. ƒê∆∞·ª£c th√†nh l·∫≠p b·ªüi BMSTORY Entertainment v√† UNETI ITC LAB.</li>
    </ul>
  </nav>
<h1>Minigame: Tri √¢n ng∆∞·ªùi l√°i ƒë√≤</h1>
<div class="game-container" id="main-screen">
    <p>H√£y d√πng m√°y t√≠nh, m√°y t√≠nh b·∫£ng ho·∫∑c laptop tr√™n website ƒë·ªÉ c√≥ tr·∫£i nghi·ªám t·ªët nh·∫•t!<br>Th·ªùi gian s·ª± ki·ªán: 10/11/2025 - 21/11/2025</p>
<div class="stats-bar">
  <div class="score"><b>üèÜ ƒêi·ªÉm: <span id="score">0</span></b></div>
  <div class="time-bar-container" id="timeContainer" style="display:none;">
    <div class="time-bar" id="timeBar">90s</div>
  </div>
</div>
  <div class="alert-line" id="alertLine" style="display:none;">
  <div id="alertText"></div></div>
  <div id="countdown"></div>
  <div id="topicSelect"></div>

  <div class="question-area" id="questionArea">
    <p id="question"></p>
    <div id="options"></div>  
    <div class="divider"></div>
    <div class="powerups">
      <button class="buff" id="timeBuff">Time Buffing +10s</button>
      <button class="buff" id="boost">Boost (G·ª£i √Ω)</button>
      <button class="buff" id="dealIt">Deal It (x3 ho·∫∑c -¬Ω)</button>
    </div>
  </div>
</div>
  <button class="start" id="startBtn">B·∫Øt ƒë·∫ßu!</button>
</div>
<div class="guide-box">
  <h2>üìú H∆∞·ªõng d·∫´n ch∆°i</h2>
  <ul>
    <li>Tr√≤ ch∆°i g·ªìm nhi·ªÅu ch·ªß ƒë·ªÅ ·∫©n danh: Nh·∫≠n th·ª©c, L·ªãch s·ª≠, Danh nh√¢n, √Çm nh·∫°c.</li>
    <li>Tr·∫£ l·ªùi ƒë√∫ng: +10 ƒëi·ªÉm ‚è© Tr·∫£ l·ªùi sai: -2 gi√¢y th·ªùi gian.</li>
    <li>D√πng c√°c Buff kh·∫©n c·∫•p:
      <ul>
        <li><b>Time Buff:</b> +10s</li>
        <li><b>Boost:</b> G·ª£i √Ω ƒë√°p √°n ƒë√∫ng</li>
        <li><b>Deal It:</b> C√¢u h·ªèi k·∫ø ƒë∆∞·ª£c x3 ƒëi·ªÉm, sai b·ªã -¬Ω ƒëi·ªÉm</li>
      </ul>
    </li>
    <li>Khi h·∫øt gi·ªù, t·ªïng ƒëi·ªÉm s·∫Ω hi·ªÉn th·ªã. H√£y th·ª≠ xem ai ƒë·∫°t cao nh·∫•t!</li>
  </ul>
</div>
<div style="
  background: linear-gradient(135deg, #ffe6ff, #e2b3ff);
  border: 3px solid #b300ff;
  border-radius: 15px;
  padding: 20px;
  max-width: 900px;
  margin: 30px auto;
  font-size: 18px;
  color: #4e0072;
  box-shadow: 0 0 10px rgba(179,0,255,0.3);
">
  <h2 style="color:#b300ff;">üíñ Th√¥ng ƒëi·ªáp t·ª´ ƒë·ªôi ng≈© ph√°t tri·ªÉn</h2>
  <p>
    Nh√¢n d·ªãp <b>20/11 ‚Äì Ng√†y Nh√† gi√°o Vi·ªát Nam</b>, minigame n√†y ƒë∆∞·ª£c t·∫°o ra nh∆∞ m·ªôt m√≥n qu√† nh·ªè 
    ƒë·ªÉ tri √¢n nh·ªØng ‚Äúng∆∞·ªùi l√°i ƒë√≤‚Äù t·∫≠n t·ª•y tr√™n h√†nh tr√¨nh gieo tri th·ª©c.  
    <br><br>
    M·ªói c√¢u h·ªèi, m·ªói ch·ªß ƒë·ªÅ l√† m·ªôt l·ªùi c·∫£m ∆°n ch√¢n th√†nh g·ª≠i ƒë·∫øn c√°c th·∫ßy c√¥ ‚Äì nh·ªØng ng∆∞·ªùi ƒë√£ 
    th·∫Øp s√°ng ∆∞·ªõc m∆°, ch·∫Øp c√°nh t∆∞∆°ng lai cho bao th·∫ø h·ªá h·ªçc sinh (v√† c·∫£ sinh vi√™n...).  
    <br><br>
    <i>‚ÄúD·∫´u th·ªùi gian c√≥ phai m·ªù, l√≤ng bi·∫øt ∆°n v·∫´n c√≤n m√£i.‚Äù</i> üå∏  
    <br><br>
    ‚Äî <b>Tr·∫ßn ƒê·∫∑ng B√¨nh Minh (BMSTORY Entertainment)</b> üí´
  </p>
</div>
          <p><a href="../index.html"><b>Quay l·∫°i phi√™n b·∫£n g·ªëc c·ªßa Good-way Edition: Fairy Draw</b></a></p>
<div class="modal" id="resultModal">
  <div class="modal-content">
    <h2>H·∫øt gi·ªù!</h2>
    <p id="finalScore"></p>
    <p>C·∫£m ∆°n b·∫°n ƒë√£ tham gia v√† ho√† nh·∫≠p v√†o kh√¥ng kh√≠ ng√†y th√°ng tuy·ªát v·ªùi c·ªßa ng∆∞·ªùi gi·ªØ l·ª≠a!</p>
    <button onclick="closeModal()">Ch∆°i l·∫°i</button>
  </div>
</div>
<script>

const questionSets = {
  nhanThuc: [
    { q: "Ng√†y Nh√† gi√°o Vi·ªát Nam l√† ng√†y n√†o?", options: ["20/10","20/11","26/3","5/9"], answer: 1 },
    { q: "Ai l√† ng∆∞·ªùi ƒë∆∞·ª£c v√≠ nh∆∞ 'ng∆∞·ªùi l√°i ƒë√≤'?", options: ["Th·∫ßy c√¥ gi√°o","B√°c sƒ©","C·∫£nh s√°t","H·ªçc sinh"], answer: 0 },
    { q: "Th·∫ßy c√¥ th∆∞·ªùng d·∫°y ch√∫ng ta ƒëi·ªÅu g√¨?", options: ["Ki·∫øn th·ª©c v√† ƒë·∫°o ƒë·ª©c","C√°ch n·∫•u ƒÉn","C√°ch ch∆°i th·ªÉ thao","C√°ch mua s·∫Øm"], answer: 0 },
    { q: "T·ª´ n√†o g·∫Øn li·ªÅn v·ªõi ngh·ªÅ gi√°o?", options: ["Ph·∫•n tr·∫Øng","B√∫a t·∫°","Dao k√©o","C·∫ßn c√¢u"], answer: 0 },
    { q: "C√¢u t·ª•c ng·ªØ n√†o n√≥i v·ªÅ c√¥ng ∆°n th·∫ßy c√¥?", options: ["Kh√¥ng th·∫ßy ƒë·ªë m√†y l√†m n√™n","ƒÇn qu·∫£ nh·ªõ k·∫ª tr·ªìng c√¢y","C√≥ c√¥ng m√†i s·∫Øt c√≥ ng√†y n√™n kim","M·ªôt c√¢y l√†m ch·∫≥ng n√™n non"], answer: 0 },
    { q: "C√¢u t·ª•c ng·ªØ n√†o th·ªÉ hi·ªán l√≤ng bi·∫øt ∆°n ng∆∞·ªùi d·∫°y d·ªó?", options: ["T√¥n s∆∞ tr·ªçng ƒë·∫°o","ƒÇn qu·∫£ nh·ªõ k·∫ª tr·ªìng c√¢y","C√≥ c√¥ng m√†i s·∫Øt c√≥ ng√†y n√™n kim","Th·∫•t b·∫°i l√† m·∫π th√†nh c√¥ng"], answer: 0 },
    { q: "C√¢u n√≥i n√†o c·ªßa Ch·ªß t·ªãch H·ªì Ch√≠ Minh li√™n quan ƒë·∫øn ngh·ªÅ d·∫°y h·ªçc?", options: ["V√¨ l·ª£i √≠ch m∆∞·ªùi nƒÉm tr·ªìng c√¢y, v√¨ l·ª£i √≠ch trƒÉm nƒÉm tr·ªìng ng∆∞·ªùi","Kh√¥ng c√≥ g√¨ qu√Ω h∆°n ƒë·ªôc l·∫≠p t·ª± do","H·ªçc, h·ªçc n·ªØa, h·ªçc m√£i","Thi ƒëua l√† y√™u n∆∞·ªõc"], answer: 0 },
    { q: "Ng√†y Nh√† gi√°o Vi·ªát Nam l√† d·ªãp ƒë·ªÉ l√†m g√¨?", options: ["T√¥n vinh th·∫ßy c√¥ v√† ngh·ªÅ d·∫°y h·ªçc", "Ngh·ªâ h·ªçc d√†i ng√†y", "Thi h·ªçc k·ª≥", "L·ªÖ h·ªôi ·∫©m th·ª±c"], answer: 0 },
    { q: "Ho·∫°t ƒë·ªông n√†o th·ªÉ hi·ªán l√≤ng bi·∫øt ∆°n th·∫ßy c√¥?", options: ["T·∫∑ng hoa, vi·∫øt thi·ªáp, bi·ªÉu di·ªÖn vƒÉn ngh·ªá", "Ngh·ªãch ph√° l·ªõp h·ªçc", "V·∫Ω b·∫≠y l√™n b·∫£ng", "B·ªè h·ªçc ƒëi ch∆°i"], answer: 0 },
    { q: "Trong ng√†y 20/11, h·ªçc sinh th∆∞·ªùng g·ª≠i ƒëi·ªÅu g√¨ ƒë·∫øn th·∫ßy c√¥?", options: ["L·ªùi ch√∫c v√† tri √¢n", "H√≥a ƒë∆°n", "B√†i ki·ªÉm tra", "Tin nh·∫Øn nh·∫Øc h·ªçc b√†i"], answer: 0 },
    { q: "Bi·ªÉu t∆∞·ª£ng quen thu·ªôc trong ng√†y 20/11 l√† g√¨?", options: ["Hoa h·ªìng v√† ph·∫•n tr·∫Øng", "Qu·∫£ b√≥ng v√† c√≤i", "B√∫a v√† ƒëe", "ƒê√®n giao th√¥ng"], answer: 0 },
    { q: "C·ª•m t·ª´ 'T√¥n s∆∞ tr·ªçng ƒë·∫°o' mang √Ω nghƒ©a g√¨?", options: ["K√≠nh tr·ªçng th·∫ßy v√† coi tr·ªçng ƒë·∫°o h·ªçc", "Nghe l·ªùi b·∫°n b√®", "L·ªÖ ph√©p v·ªõi cha m·∫π", "H·ªçc thu·ªôc b√†i nhanh"], answer: 0 },
    { q: "Th·∫ßy c√¥ c√≥ vai tr√≤ g√¨ trong cu·ªôc ƒë·ªùi m·ªói ng∆∞·ªùi?", options: ["D·∫´n d·∫Øt, truy·ªÅn ƒë·∫°t tri th·ª©c v√† nh√¢n c√°ch", "Gi√∫p ta ki·∫øm ti·ªÅn", "Ch·∫•m ƒëi·ªÉm th√¥i", "Gi√°m s√°t gi·ªù ra ch∆°i"], answer: 0 },
    { q: "C·ª•m t·ª´ 'T√¥n s∆∞ tr·ªçng ƒë·∫°o' ph·∫£n √°nh gi√° tr·ªã n√†o trong vƒÉn ho√° Vi·ªát?", options: ["Truy·ªÅn th·ªëng hi·∫øu h·ªçc v√† bi·∫øt ∆°n th·∫ßy c√¥", "Tinh th·∫ßn ƒëo√†n k·∫øt", "L√≤ng y√™u n∆∞·ªõc", "√ù ch√≠ v∆∞·ª£t kh√≥"], answer: 0 },
    { q: "Trong x√£ h·ªôi hi·ªán ƒë·∫°i, √Ω nghƒ©a l·ªõn nh·∫•t c·ªßa Ng√†y Nh√† gi√°o Vi·ªát Nam l√† g√¨?", options: ["G√¨n gi·ªØ v√† ph√°t huy truy·ªÅn th·ªëng t√¥n s∆∞ tr·ªçng ƒë·∫°o", "Ch·ªâ l√† ng√†y ngh·ªâ h·ªçc", "Ng√†y t·ªïng k·∫øt h·ªçc k·ª≥", "Ng√†y t·∫∑ng qu√† l·∫•y ƒëi·ªÉm t·ªët"], answer: 0 },
    { q: "Theo b·∫°n, h√†nh ƒë·ªông n√†o thi·∫øt th·ª±c nh·∫•t ƒë·ªÉ tri √¢n th·∫ßy c√¥?", options: ["C·ªë g·∫Øng h·ªçc t·ªët v√† s·ªëng t·ªët", "T·∫∑ng qu√† ƒë·∫Øt ti·ªÅn", "L√†m video TikTok", "Ch·ª•p ·∫£nh check-in"], answer: 0 },
    { q: "T·ª´ 'nh√† gi√°o' bao h√†m √Ω nghƒ©a g√¨ s√¢u xa?", options: ["Ng∆∞·ªùi d·∫°y ki·∫øn th·ª©c v√† h∆∞·ªõng d·∫´n nh√¢n c√°ch", "Ng∆∞·ªùi l√†m c√¥ng vi·ªác vƒÉn ph√≤ng", "Ng∆∞·ªùi vi·∫øt s√°ch", "Ng∆∞·ªùi truy·ªÅn th√¥ng"], answer: 0 },
    { q: "C√¢u n√≥i n√†o th·ªÉ hi·ªán l√≤ng bi·∫øt ∆°n th·∫ßy c√¥?", options: ["D√π kh√≥ khƒÉn ƒë·∫øn ƒë√¢u c≈©ng ph·∫£i h·ªçc", "H·ªçc ƒë·ªÉ l√†m gi√†u", "Th·∫ßy c√¥ l√† ng∆∞·ªùi b·∫°n t·ªët", "H·ªçc ƒë·ªÉ tr·ªü th√†nh ng∆∞·ªùi n·ªïi ti·∫øng"], answer: 0 },
    { q: "Ng√†y Nh√† gi√°o Vi·ªát Nam gi√∫p ch√∫ng ta nh·∫≠n th·ª©c ƒëi·ªÅu g√¨ quan tr·ªçng?", options: ["Gi√° tr·ªã c·ªßa tri th·ª©c v√† c√¥ng lao c·ªßa th·∫ßy c√¥", "C√°ch ch∆°i th·ªÉ thao", "C√°ch n·∫•u ƒÉn ngon", "C√°ch mua s·∫Øm th√¥ng minh"], answer: 0 },
    { q: "C√¢u n√≥i 'Kh√¥ng c√≥ h·ªçc tr√≤ d·ªët, ch·ªâ c√≥ th·∫ßy d·∫°y ch∆∞a t·ªët' th·ªÉ hi·ªán ƒëi·ªÅu g√¨?", options: ["Tr√°ch nhi·ªám cao c·ªßa ng∆∞·ªùi d·∫°y", "Ph√™ b√¨nh h·ªçc sinh", "T∆∞ t∆∞·ªüng c√° nh√¢n ch·ªß nghƒ©a", "Tinh th·∫ßn c·∫°nh tranh"], answer: 0 },
  ],

  lichSu: [
    { q: "Ng√†y 20/11 ƒë·∫ßu ti√™n ƒë∆∞·ª£c t·ªï ch·ª©c v√†o nƒÉm n√†o?", options: ["1958","1982","1975","2000"], answer: 1 },
    { q: "T·ªï ch·ª©c n√†o kh·ªüi x∆∞·ªõng Ng√†y Nh√† gi√°o Vi·ªát Nam?", options: ["C√¥ng ƒëo√†n gi√°o d·ª•c Vi·ªát Nam","Li√™n h·ª£p qu·ªëc","B·ªô Gi√°o d·ª•c v√† ƒê√†o t·∫°o","UNESCO"], answer: 0 },
    { q: "Ng√†y Nh√† gi√°o Vi·ªát Nam b·∫Øt ngu·ªìn t·ª´ s·ª± ki·ªán n√†o?", options: ["H·ªôi ngh·ªã c√°c nh√† gi√°o to√†n ƒê√¥ng D∆∞∆°ng t·∫°i Ba Lan nƒÉm 1957","Th√†nh l·∫≠p B·ªô Gi√°o d·ª•c Vi·ªát Nam","Ng√†y khai gi·∫£ng ƒë·∫ßu ti√™n","Qu·ªëc t·∫ø thi·∫øu nhi 1/6"], answer: 0 },
    { q: "Ng√†y Nh√† gi√°o Vi·ªát Nam ƒë∆∞·ª£c c√¥ng nh·∫≠n ch√≠nh th·ª©c v√†o nƒÉm n√†o?", options: ["1982","1975","1958","1990"], answer: 0 },
    { q: "Ng√†y Qu·ªëc t·∫ø Nh√† gi√°o (World Teachers‚Äô Day) ƒë∆∞·ª£c UNESCO ch·ªçn v√†o ng√†y n√†o?", options: ["5/10","20/11","15/5","10/9"], answer: 0 },
    { q: "M·ª•c ƒë√≠ch ch√≠nh c·ªßa Ng√†y Nh√† gi√°o Vi·ªát Nam l√† g√¨?", options: ["T√¥n vinh v√† tri √¢n th·∫ßy c√¥ gi√°o","K·ª∑ ni·ªám ng√†y th√†nh l·∫≠p tr∆∞·ªùng","T·ªï ch·ª©c thi ƒëua h·ªçc t·∫≠p","Ph√°t ƒë·ªông phong tr√†o th·ªÉ thao"], answer: 0 },
    { q: "Phong tr√†o n√†o th∆∞·ªùng di·ªÖn ra trong d·ªãp 20/11?", options: ["Thi ƒëua d·∫°y t·ªët h·ªçc t·ªët","Ngh·ªâ h·ªçc d√†i ng√†y","Thi ƒë·∫•u th·ªÉ thao","H·ªôi ch·ª£ ·∫©m th·ª±c"], answer: 0 },
    { q: "Ng√†y Nh√† gi√°o Vi·ªát Nam c≈©ng nh·∫±m m·ª•c ƒë√≠ch g√¨?", options: ["N√¢ng cao vai tr√≤ c·ªßa nh√† gi√°o trong x√£ h·ªôi","TƒÉng l∆∞∆°ng cho gi√°o vi√™n","X√¢y d·ª±ng tr∆∞·ªùng h·ªçc m·ªõi","Ph√°t tri·ªÉn c√¥ng ngh·ªá gi√°o d·ª•c"], answer: 0 },
    { q: "Ai l√† ng∆∞·ªùi c√≥ c√¥ng l·ªõn trong vi·ªác th√†nh l·∫≠p Ng√†y Nh√† gi√°o Vi·ªát Nam?", options: ["C√¥ng ƒëo√†n gi√°o d·ª•c Vi·ªát Nam","B·ªô tr∆∞·ªüng B·ªô Gi√°o d·ª•c","Ch·ªß t·ªãch n∆∞·ªõc","Th·ªß t∆∞·ªõng Ch√≠nh ph·ªß"], answer: 0 },
    { q: "Ai l√† B·ªô tr∆∞·ªüng ƒë·∫ßu ti√™n c·ªßa B·ªô Gi√°o d·ª•c Vi·ªát Nam?", options: ["T·∫° Quang B·ª≠u", "Nguy·ªÖn VƒÉn Huy√™n", "Ph·∫°m VƒÉn ƒê·ªìng", "Tr·∫ßn ƒê·∫°i Nghƒ©a"], answer: 1 },
    { q: "T·ª´ nƒÉm 1982, ng√†y 20/11 ƒë∆∞·ª£c t·ªï ch·ª©c ƒë·ªãnh k·ª≥ v√†o ng√†y n√†o h√†ng nƒÉm?", options: ["20/11", "5/9", "15/10", "1/6"], answer: 0 },
    { q: "Sau nƒÉm 1982, ho·∫°t ƒë·ªông n√†o ƒë∆∞·ª£c t·ªï ch·ª©c r·ªông r√£i trong c√°c tr∆∞·ªùng h·ªçc?", options: ["L·ªÖ tri √¢n v√† vƒÉn ngh·ªá ch√†o m·ª´ng 20/11", "H·ªôi thi th·ªÉ thao m√πa xu√¢n", "Ng√†y h·ªôi s√°ch qu·ªëc gia", "H·ªôi di·ªÖn ca m√∫a nh·∫°c thi·∫øu nhi"], answer: 0 },
    { q: "T√™n ti·∫øng Anh c·ªßa Ng√†y Nh√† gi√°o Vi·ªát Nam l√† g√¨?", options: ["Vietnamese Teachers' Day", "International Education Day", "School Day Vietnam", "Study Appreciation Day"], answer: 0 },
    { q: "T·∫°i sao ng√†y 20/11 ƒë∆∞·ª£c ch·ªçn l√†m Ng√†y Nh√† gi√°o Vi·ªát Nam thay v√¨ ng√†y kh√°c?", options: ["G·∫Øn li·ªÅn v·ªõi s·ª± ki·ªán Hi·∫øn ch∆∞∆°ng c√°c Nh√† gi√°o 1957", "Tr√πng v·ªõi ng√†y khai gi·∫£ng", "L√† ng√†y ngh·ªâ thu·∫≠n ti·ªán", "L√† ng√†y m√πa thu ƒë·∫πp"], answer: 0 },
    { q: "S·ª± ki·ªán n√†o ƒë√°nh d·∫•u l·∫ßn ƒë·∫ßu ti√™n Vi·ªát Nam tham gia k·ª∑ ni·ªám Ng√†y Qu·ªëc t·∫ø Hi·∫øn ch∆∞∆°ng c√°c Nh√† gi√°o?", options: ["NƒÉm 1958, theo ƒë·ªÅ ngh·ªã c·ªßa C√¥ng ƒëo√†n Gi√°o d·ª•c Vi·ªát Nam", "NƒÉm 1982, sau khi th·ªëng nh·∫•t ƒë·∫•t n∆∞·ªõc", "NƒÉm 1965, theo UNESCO", "NƒÉm 1976, t·∫°i Ba Lan"], answer: 0 },
    { q: "Tr∆∞·ªõc 1975, mi·ªÅn Nam Vi·ªát Nam c√≥ k·ª∑ ni·ªám ng√†y d√†nh cho th·∫ßy c√¥ kh√¥ng?", options: ["C√≥, nh∆∞ng ch∆∞a th·ªëng nh·∫•t to√†n qu·ªëc", "Kh√¥ng h·ªÅ c√≥", "Ch·ªâ trong c√°c tr∆∞·ªùng t∆∞", "C√≥, tr√πng ng√†y 5/9"], answer: 0 },
    { q: "NƒÉm 2022, ng√†nh Gi√°o d·ª•c Vi·ªát Nam k·ª∑ ni·ªám bao nhi√™u nƒÉm Ng√†y Nh√† gi√°o Vi·ªát Nam?", options: ["40 nƒÉm", "50 nƒÉm", "45 nƒÉm", "30 nƒÉm"], answer: 0 },
  ],

  danhNhan: [
    { q: "Ai l√† ng∆∞·ªùi ƒë∆∞·ª£c xem l√† nh√† gi√°o ƒë·∫ßu ti√™n trong l·ªãch s·ª≠ Vi·ªát Nam?", options: ["Kh·ªïng T·ª≠","Chu VƒÉn An","Nguy·ªÖn Tr√£i","Nguy·ªÖn B·ªânh Khi√™m"], answer: 1 },
    { q: "T√™n ƒë·∫ßy ƒë·ªß c·ªßa danh nh√¢n Chu VƒÉn An l√† g√¨?", options: ["Chu VƒÉn An (t√™n th·∫≠t l√† Chu An)","Chu VƒÉn An (t√™n th·∫≠t l√† Chu VƒÉn An)","Chu VƒÉn Chi√™u An","Chu VƒÉn Hi·ªÅn"], answer: 0 },
    { q: "Ai l√† Nh√† gi√°o Nh√¢n d√¢n ƒë·∫ßu ti√™n ƒë∆∞·ª£c phong trong lƒ©nh v·ª±c To√°n h·ªçc?", options: ["GS Ho√†ng T·ª•y","GS Ng√¥ B·∫£o Ch√¢u","GS L√™ VƒÉn Thi√™m","GS T·∫° Quang B·ª≠u"], answer: 2 },
    { q: "Nh√† gi√°o Nh√¢n d√¢n Nguy·ªÖn L√¢n n·ªïi ti·∫øng v·ªõi c√¥ng tr√¨nh n√†o?", options: ["T·ª´ ƒëi·ªÉn Ti·∫øng Vi·ªát","Gi√°o tr√¨nh To√°n h·ªçc","Gi√°o tr√¨nh L√Ω lu·∫≠n vƒÉn h·ªçc","S√°ch gi√°o khoa Sinh h·ªçc"], answer: 0 },
    { q: "Nh√† gi√°o Nh√¢n d√¢n Nguy·ªÖn Ng·ªçc K√Ω ƒë∆∞·ª£c bi·∫øt ƒë·∫øn v·ªõi ƒëi·ªÅu g√¨?", options: ["Vi·∫øt b·∫±ng ch√¢n v√† tr·ªü th√†nh th·∫ßy gi√°o d·∫°y VƒÉn","S√°ng t√°c nhi·ªÅu b√†i h√°t thi·∫øu nhi","L√† hi·ªáu tr∆∞·ªüng tr·∫ª nh·∫•t n∆∞·ªõc","L√† ng∆∞·ªùi s√°ng l·∫≠p phong tr√†o d·∫°y gi·ªèi"], answer: 0 },
    { q: "Ai l√† t·∫•m g∆∞∆°ng s√°ng v·ªÅ l√≤ng y√™u ngh·ªÅ v√† t·∫≠n t·ª•y v·ªõi h·ªçc tr√≤?", options: ["Chu VƒÉn An", "Tr·∫ßn H∆∞ng ƒê·∫°o", "Nguy·ªÖn Du", "L√Ω Th∆∞·ªùng Ki·ªát"], answer: 0 },
    { q: "Danh nh√¢n n√†o t·ª´ng ƒë∆∞·ª£c phong l√† 'V·∫°n th·∫ø s∆∞ bi·ªÉu'?", options: ["Kh·ªïng T·ª≠", "Nguy·ªÖn Tr√£i", "Nguy·ªÖn B·ªânh Khi√™m", "L√™ Qu√Ω ƒê√¥n"], answer: 0 },
    { q: "Nh√† gi√°o n√†o ƒë∆∞·ª£c xem l√† ng∆∞·ªùi ƒë·∫∑t n·ªÅn m√≥ng cho n·ªÅn gi√°o d·ª•c hi·ªán ƒë·∫°i Vi·ªát Nam?", options: ["GS L√™ VƒÉn Thi√™m", "GS Nguy·ªÖn L√¢n", "GS Ho√†ng T·ª•y", "GS T·∫° Quang B·ª≠u"], answer: 3 },
    { q: "Ai l√† ng∆∞·ªùi s√°ng l·∫≠p Tr∆∞·ªùng Qu·ªëc h·ªçc Hu·∫ø?", options: ["Nguy·ªÖn ƒê√¨nh Chi·ªÉu", "Phan B·ªôi Ch√¢u", "Nguy·ªÖn VƒÉn T·ªë", "Nguy·ªÖn Th√∫c H√†o"], answer: 2 },
    { q: "Nh√† gi√°o Nh√¢n d√¢n n√†o ƒë∆∞·ª£c bi·∫øt ƒë·∫øn v·ªõi c√¥ng tr√¨nh nghi√™n c·ª©u v·ªÅ ng√¥n ng·ªØ h·ªçc?", options: ["GS Nguy·ªÖn L√¢n", "GS Ho√†ng T·ª•y", "GS L√™ VƒÉn Thi√™m", "GS T·∫° Quang B·ª≠u"], answer: 0 },
    { q: "Ai t·ª´ng d√¢ng s·ªõ ch√©m gian th·∫ßn, bi·ªÉu t∆∞·ª£ng cho kh√≠ ti·∫øt nh√† gi√°o?", options: ["Chu VƒÉn An", "Nguy·ªÖn Tr√£i", "Nguy·ªÖn Du", "Ng√¥ Sƒ© Li√™n"], answer: 0 },
    { q: "Nh√† gi√°o n√†o t·ª´ng l√† ng∆∞·ªùi s√°ng l·∫≠p Tr∆∞·ªùng ƒê·∫°i h·ªçc Qu·ªëc gia Vi·ªát Nam?", options: ["GS T·∫° Quang B·ª≠u", "GS L√™ VƒÉn Thi√™m", "GS Nguy·ªÖn VƒÉn Huy√™n", "GS Tr·∫ßn ƒê·∫°i Nghƒ©a"], answer: 2 },
    { q: "Ng∆∞·ªùi th·∫ßy ƒë∆∞·ª£c m·ªánh danh l√† 'Ng∆∞·ªùi gieo h·∫°t To√°n h·ªçc Vi·ªát Nam' l√† ai?", options: ["GS L√™ VƒÉn Thi√™m", "GS Ho√†ng T·ª•y", "GS Ng√¥ B·∫£o Ch√¢u", "GS Nguy·ªÖn C·∫£nh To√†n"], answer: 0 },
    { q: "Danh hi·ªáu 'Nh√† gi√°o Nh√¢n d√¢n' ƒë∆∞·ª£c Nh√† n∆∞·ªõc phong t·∫∑ng l·∫ßn ƒë·∫ßu v√†o nƒÉm n√†o?", options: ["1988", "1981", "1990", "1985"], answer: 1 },
    { q: "Chu VƒÉn An ƒë∆∞·ª£c xem l√† bi·ªÉu t∆∞·ª£ng cho ph·∫©m ch·∫•t n√†o c·ªßa ng∆∞·ªùi th·∫ßy Vi·ªát Nam?", options: ["Ch√≠nh tr·ª±c, t·∫≠n t·ª•y, ki√™n ƒë·ªãnh ƒë·∫°o ƒë·ª©c ngh·ªÅ", "Gi√†u c√≥ v√† danh v·ªçng", "Gi·ªèi v√µ ngh·ªá", "C·ªüi m·ªü v√† hi·ªán ƒë·∫°i"], answer: 0 },
    { q: "Danh nh√¢n n√†o t·ª´ng l√†m quan nh∆∞ng xin t·ª´ ch·ª©c ƒë·ªÉ d·∫°y h·ªçc?", options: ["Chu VƒÉn An", "Nguy·ªÖn Du", "Ng√¥ Th√¨ Nh·∫≠m", "Nguy·ªÖn B·ªânh Khi√™m"], answer: 3 },
    { q: "GS Ho√†ng T·ª•y ƒë∆∞·ª£c th·∫ø gi·ªõi bi·∫øt ƒë·∫øn v·ªõi lƒ©nh v·ª±c n√†o?", options: ["To√°n h·ªçc ‚Äì T·ªëi ∆∞u to√†n c·ª•c", "VƒÉn h·ªçc ‚Äì Thi ca", "V·∫≠t l√Ω l∆∞·ª£ng t·ª≠", "Gi√°o d·ª•c m·∫ßm non"], answer: 0 },
    { q: "Ai l√† ng∆∞·ªùi s√°ng l·∫≠p Tr∆∞·ªùng ƒê·∫°i h·ªçc S∆∞ ph·∫°m H√† N·ªôi?", options: ["GS T·∫° Quang B·ª≠u", "GS L√™ VƒÉn Thi√™m", "GS Nguy·ªÖn VƒÉn Huy√™n", "GS Tr·∫ßn ƒê·∫°i Nghƒ©a"], answer: 0 },
    { q: "Nh√† gi√°o Nh√¢n d√¢n Nguy·ªÖn L√¢n c√≥ ƒë√≥ng g√≥p l·ªõn trong lƒ©nh v·ª±c n√†o?", options: ["Ng√¥n ng·ªØ h·ªçc v√† t·ª´ ƒëi·ªÉn h·ªçc", "To√°n h·ªçc", "V·∫≠t l√Ω", "H√≥a h·ªçc"], answer: 0 },
    { q: "Danh nh√¢n Chu VƒÉn An s·ªëng v√†o th·ªùi k·ª≥ n√†o?", options: ["Tr·∫ßn (th·∫ø k·ª∑ 13-14)", "L√Ω (th·∫ø k·ª∑ 11-12)", "Nguy·ªÖn (th·∫ø k·ª∑ 19)", "Tr·ªãnh (th·∫ø k·ª∑ 16-17)"], answer: 0 },
  ],

  amNhac: [
    { q: "B√†i h√°t n√†o th∆∞·ªùng h√°t trong d·ªãp 20/11?", options: ["B·ª•i ph·∫•n","C√¢y v√† gi√≥","Nh∆∞ c√≥ B√°c H·ªì","M·ªôt con v·ªãt"], answer: 0 },
    { q: "Ai l√† ng∆∞·ªùi s√°ng t√°c b√†i h√°t 'B·ª•i ph·∫•n'?", options: ["V≈© Ho√†ng","Tr·ªãnh C√¥ng S∆°n","Ph·∫°m Tuy√™n","Nguy·ªÖn VƒÉn Chung"], answer: 0 },
    { q: "B√†i h√°t 'Ng∆∞·ªùi th·∫ßy' do ai s√°ng t√°c?", options: ["Nguy·ªÖn Nh·∫•t Huy","Tr·ªãnh C√¥ng S∆°n","Ph√∫ Quang","V≈© C√°t T∆∞·ªùng"], answer: 0 },
    { q: "B√†i h√°t 'Ng∆∞·ªùi th·∫ßy' ƒë∆∞·ª£c ca sƒ© n√†o th·ªÉ hi·ªán n·ªïi ti·∫øng nh·∫•t?", options: ["C·∫©m Ly","Cao Minh","M·ªπ T√¢m","ƒêan Tr∆∞·ªùng"], answer: 1 },
    { q: "Ca kh√∫c 'Mong ∆∞·ªõc k·ª∑ ni·ªám x∆∞a' c√≥ c√¢u m·ªü ƒë·∫ßu l√† g√¨?", options: ["Th·ªùi gian tr√¥i qua th·∫≠t mau...","Khi th·∫ßy vi·∫øt b·∫£ng, b·ª•i ph·∫•n r∆°i r∆°i...","Ng∆∞·ªùi th·∫ßy v·∫´n l·∫∑ng l·∫Ω ƒëi v·ªÅ s·ªõm tr∆∞a...","Tr∆∞·ªùng em n·∫±m gi·ªØa ng√†n xanh..."], answer: 0 },
    { q: "B√†i h√°t 'Th·∫ßy c√¥ cho em m√πa xu√¢n' do ai s√°ng t√°c?", options: ["Nguy·ªÖn Ng·ªçc Thi·ªán","Ph·∫°m Tuy√™n","Tr·∫ßn Ng·ªçc","Ho√†ng V√¢n"], answer: 2 },
    { q: "B√†i h√°t n√†o c√≥ c√¢u 'Khi th·∫ßy vi·∫øt b·∫£ng, b·ª•i ph·∫•n r∆°i r∆°i'?", options: ["B·ª•i ph·∫•n", "Ng∆∞·ªùi th·∫ßy", "Mong ∆∞·ªõc k·ª∑ ni·ªám x∆∞a", "Th·∫ßy c√¥ cho em m√πa xu√¢n"], answer: 0 },
    { q: "Nh·∫°c ph·∫©m n√†o th∆∞·ªùng vang l√™n trong l·ªÖ tri √¢n th·∫ßy c√¥?", options: ["Ng∆∞·ªùi th·∫ßy", "N·ªëi v√≤ng tay l·ªõn", "T·ª± nguy·ªán", "Kh√°t v·ªçng tu·ªïi tr·∫ª"], answer: 0 },
    { q: "B√†i h√°t n√†o c√≥ giai ƒëi·ªáu vui t∆∞∆°i, th·ªÉ hi·ªán t√¨nh c·∫£m h·ªçc tr√≤ v·ªõi th·∫ßy c√¥?", options: ["Th·∫ßy c√¥ cho em m√πa xu√¢n", "M√πa xu√¢n ƒë·∫ßu ti√™n", "C√¢y v√† gi√≥", "B·ª•i ph·∫•n"], answer: 0 },
    { q: "Ai l√† ng∆∞·ªùi s√°ng t√°c b√†i h√°t 'Mong ∆∞·ªõc k·ª∑ ni·ªám x∆∞a'?", options: ["Tr·∫ßn Ti·∫øn","Ph√∫ Quang","VƒÉn Cao","Tr·ªãnh C√¥ng S∆°n"], answer: 1 },
    { q: "C√¢u h√°t 'Th·∫ßy c√¥ cho em m√πa xu√¢n' n·∫±m trong ca kh√∫c n√†o?", options: ["Th·∫ßy c√¥ cho em m√πa xu√¢n", "Ng∆∞·ªùi th·∫ßy", "B·ª•i ph·∫•n", "Mong ∆∞·ªõc k·ª∑ ni·ªám x∆∞a"], answer: 0 },
    { q: "T√°c gi·∫£ n√†o c√≥ nhi·ªÅu b√†i h√°t v·ªÅ th·∫ßy c√¥ v√† m√°i tr∆∞·ªùng?", options: ["Ph·∫°m Tuy√™n", "Tr·ªãnh C√¥ng S∆°n", "V≈© Ho√†ng", "Nguy·ªÖn VƒÉn Chung"], answer: 0 },
    { q: "B√†i h√°t n√†o g·ª£i l·∫°i k·ª∑ ni·ªám th·ªùi h·ªçc sinh, th∆∞·ªùng ƒë∆∞·ª£c h√°t trong l·ªÖ tri √¢n?", options: ["Mong ∆∞·ªõc k·ª∑ ni·ªám x∆∞a", "T·∫°m bi·ªát nh√©", "Nh∆∞ c√≥ B√°c H·ªì", "B·ª•i ph·∫•n"], answer: 0 },
    { q: "Giai ƒëi·ªáu n√†o g·∫Øn li·ªÅn v·ªõi l·ªùi ca 'Ng∆∞·ªùi th·∫ßy v·∫´n l·∫∑ng l·∫Ω ƒëi v·ªÅ s·ªõm tr∆∞a'?", options: ["Ng∆∞·ªùi th·∫ßy", "Th·∫ßy c√¥ cho em m√πa xu√¢n", "B·ª•i ph·∫•n", "Nh·ªØng b√¥ng hoa trong v∆∞·ªùn"], answer: 0 },
    { q: "B√†i 'Ng∆∞·ªùi th·∫ßy' ngo√†i ca ng·ª£i ngh·ªÅ gi√°o c√≤n g·ª≠i g·∫Øm th√¥ng ƒëi·ªáp g√¨?", options: ["Bi·∫øt ∆°n, tr√¢n tr·ªçng v√† ti·∫øp n·ªëi l√Ω t∆∞·ªüng c·ªßa th·∫ßy c√¥", "K√™u g·ªçi b·∫£o v·ªá m√¥i tr∆∞·ªùng", "N√≥i v·ªÅ m√πa xu√¢n", "Ca ng·ª£i tu·ªïi tr·∫ª"], answer: 0 },
    { q: "Trong b√†i 'B·ª•i ph·∫•n', h√¨nh ·∫£nh 'b·ª•i ph·∫•n r∆°i r∆°i' t∆∞·ª£ng tr∆∞ng cho ƒëi·ªÅu g√¨?", options: ["S·ª± hy sinh th·∫ßm l·∫∑ng c·ªßa ng∆∞·ªùi th·∫ßy", "Kh√¥ng kh√≠ l·ªõp h·ªçc b·ª•i b·∫∑m", "Th·ªùi gian tr√¥i nhanh", "T√¨nh y√™u tu·ªïi h·ªçc tr√≤"], answer: 0 },
    { q: "‚ÄòMong ∆∞·ªõc k·ª∑ ni·ªám x∆∞a‚Äô ƒë∆∞·ª£c xem l√† bi·ªÉu t∆∞·ª£ng cho ƒëi·ªÅu g√¨ trong tu·ªïi h·ªçc tr√≤?", options: ["T√¨nh c·∫£m trong s√°ng v√† tri √¢n th·∫ßy c√¥", "S·ª± chia ly bu·ªìn b√£", "Kh√°t v·ªçng th√†nh c√¥ng", "T√¨nh y√™u ƒë√¥i l·ª©a"], answer: 0 },
    { q: "Ca kh√∫c n√†o sau ƒë√¢y KH√îNG ph·∫£i v·ªÅ ch·ªß ƒë·ªÅ th·∫ßy c√¥?", options: ["N·ªëi v√≤ng tay l·ªõn", "B·ª•i ph·∫•n", "Ng∆∞·ªùi th·∫ßy", "Mong ∆∞·ªõc k·ª∑ ni·ªám x∆∞a"], answer: 0 },
  ]
};
let questions = [];
let score = 0, timeLeft = 90, timer, currentQ;
let dealMode = false;
let used = { timeBuff: false, boost: false, dealIt: false };
const qArea = document.getElementById("questionArea");
const qText = document.getElementById("question");
const opts = document.getElementById("options");
const scoreEl = document.getElementById("score");
const timeBar = document.getElementById("timeBar");
const timeFill = document.getElementById("timeFill");
const countdown = document.getElementById("countdown");
const topicSelect = document.getElementById("topicSelect");
const startBtn = document.getElementById("startBtn");
const topics = [
  { name: "??", key: "nhanThuc", display: "Nh·∫≠n th·ª©c chung" },
  { name: "??", key: "lichSu", display: "L·ªãch s·ª≠ ng√†y 20/11" },
  { name: "??", key: "danhNhan", display: "Nh√† gi√°o & Danh nh√¢n" },
  { name: "??", key: "amNhac", display: "√Çm nh·∫°c tri √¢n th·∫ßy c√¥" }
];

const topicTitle = document.createElement("h2");
topicTitle.id = "topicTitle";
topicTitle.style.color = "#b300ff";
topicTitle.style.marginBottom = "10px";
qArea.prepend(topicTitle);
document.getElementById("timeBuff").onclick = useTimeBuff;
document.getElementById("boost").onclick = useBoost;
document.getElementById("dealIt").onclick = useDealIt;
startBtn.onclick = startCountdown;

let lastTime = Date.now();

function startGame() {
  score = 0;
  timeLeft = 90;
  used = { timeBuff: false, boost: false, dealIt: false };
  document.querySelectorAll(".powerups button").forEach(b => b.disabled = false);
  document.getElementById("timeContainer").style.display = "block";
  document.getElementById("alertLine").style.display = "block";

  lastTime = Date.now();
  clearInterval(timer);
  timer = setInterval(() => {
    const now = Date.now();
    const delta = (now - lastTime) / 1000;
    lastTime = now;

    timeLeft -= delta;
    if (timeLeft <= 0) {
      timeLeft = 0;
      endGame();
    }
    updateTimeBar();
  }, 100);
}

function updateTimeBar() {
  const timeBar = document.getElementById("timeBar");
  const percent = Math.max(0, (timeLeft / 90) * 100);
  timeBar.style.width = percent + "%";
  timeBar.textContent = Math.ceil(timeLeft) + "s";

  timeBar.classList.remove("warning", "danger");
  if (timeLeft <= 15) timeBar.classList.add("danger");
  else if (timeLeft <= 30) timeBar.classList.add("warning");
}

function startCountdown() {
  startBtn.style.display = "none";
  let c = 3;
  countdown.textContent = c;
  let cd = setInterval(() => {
    c--;
    if (c > 0) countdown.textContent = c;
    else if (c === 0) countdown.textContent = "B·∫ÆT ƒê·∫¶U!";
    else {
      clearInterval(cd);
      countdown.style.display = "none";
      chooseTopic();
      startGame();
    }
  }, 1000);
}

function chooseTopic() {
  topicSelect.innerHTML = "<h2>B·ªëc ch·ªß ƒë·ªÅ ·∫©n danh</h2>";
  topics.forEach(t => {
    const btn = document.createElement("button");
    btn.className = "topicBtn";
    btn.textContent = t.name;
    btn.onclick = () => {
        topicSelect.style.display = "none";
        qArea.style.display = "block";
        topicTitle.textContent = "üéØ ƒê√£ ch·ªçn ch·ªß ƒë·ªÅ: " + t.display;
        questions = questionSets[t.key];
        nextQuestion();
    };
    topicSelect.appendChild(btn);
  });
  topicSelect.style.display = "block";
}

function nextQuestion() {
  currentQ = questions[Math.floor(Math.random() * questions.length)];
  const arr = currentQ.options.map((opt, i) => ({ opt, index: i }));
  const shuffled = arr.sort(() => Math.random() - 0.5);
  qText.textContent = currentQ.q;
  opts.innerHTML = "";
  shuffled.forEach((item, i) => {
    const btn = document.createElement("button");
    btn.textContent = (i + 1) + ". " + item.opt;
    btn.onclick = () => checkAnswer(item.index);
    opts.appendChild(btn);
  });
}

function showAlert(text, color1, color2) {
  const alertLine = document.getElementById("alertLine");
  const alertText = document.getElementById("alertText");
  alertLine.style.background = `linear-gradient(to right, ${color1}, ${color2})`;
  alertText.textContent = text;
  alertText.style.animation = "none";
  void alertText.offsetWidth;
  alertText.style.animation = "fadeInOut 1.8s ease";
}


function checkAnswer(i) {
  if (i === currentQ.answer) {
    if (dealMode) { score += 30; dealMode = false; showAlert("C√¢u h·ªèi tr∆∞·ªõc: üí• Deal It th√†nh c√¥ng! +30ƒë", "#00ff99", "#00d9ff"); }
    else { score += 10; showAlert("C√¢u h·ªèi tr∆∞·ªõc: ‚úÖ ƒê√£ ch√≠nh x√°c +10ƒë", "#00ff99", "#00d9ff"); }
  } else {
    if (dealMode) { score = Math.floor(score / 2); dealMode = false; showAlert("C√¢u h·ªèi tr∆∞·ªõc: ‚ùå Deal It th·∫•t b·∫°i! -¬Ω ƒëi·ªÉm", "#ff0000", "#ff7b00"); }
    else { timeLeft = Math.max(0, timeLeft - 2); showAlert("C√¢u h·ªèi tr∆∞·ªõc: ‚ùå Tr·∫£ l·ªùi sai -2s", "#ff0000", "#ff7b00"); }
  }
  scoreEl.textContent = score;
  qArea.style.display = "none";
  chooseTopic();
}

function useTimeBuff() {
  if (used.timeBuff) return;
  used.timeBuff = true;
  timeLeft += 10;
  document.getElementById("timeBuff").disabled = true;
  updateTimeBar();
}

function useBoost() {
  if (used.boost) return;
  used.boost = true;
  document.getElementById("boost").disabled = true;
  const correctIndex = currentQ.answer;
  const btns = opts.querySelectorAll("button");
  btns.forEach(b => {
    if (b.textContent.includes(currentQ.options[correctIndex])) {
      b.style.border = "3px solid #00ff00";
      b.style.background = "#b9ffb9";
    }
  });
}

function useDealIt() {
  if (used.dealIt) return;
  used.dealIt = true;
  dealMode = true;
  document.getElementById("dealIt").disabled = true;
  showAlert("Deal It k√≠ch ho·∫°t! C√¢u n√†y ƒë√∫ng ƒë∆∞·ª£c x3 ƒëi·ªÉm, sai b·ªã tr·ª´ n·ª≠a s·ªë ƒëi·ªÉm!");
}

function endGame() {
  clearInterval(timer);
  timeBar.style.display = "none";
  qArea.style.display = "none";
  topicSelect.style.display = "none";
  document.getElementById("resultModal").classList.add("show");
  document.getElementById("finalScore").textContent = "T·ªïng ƒëi·ªÉm c·ªßa b·∫°n: " + score;
}

function closeModal() {
  location.reload(true);
}
</script>
</body>
</html>
